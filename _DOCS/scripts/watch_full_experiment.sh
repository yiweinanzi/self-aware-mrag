#!/bin/bash
# å…¨æ•°æ®é›†å®éªŒå®æ—¶ç›‘æ§

LOG_FILE="/root/autodl-tmp/full_dataset_experiment.log"

while true; do
    clear
    echo "================================================"
    echo "ğŸ” MRAG-Bench å…¨æ•°æ®é›†å®éªŒ (1353æ ·æœ¬)"
    echo "================================================"
    echo "æ—¶é—´: $(date '+%Y-%m-%d %H:%M:%S')"
    echo ""
    
    # è¿›ç¨‹çŠ¶æ€
    if ps aux | grep -q "[p]ython.*run_all_baselines"; then
        UPTIME=$(ps -p $(pgrep -f "run_all_baselines") -o etime= | tr -d ' ')
        echo "âœ… å®éªŒè¿è¡Œä¸­ | æ—¶é•¿: $UPTIME"
    else
        echo "âŒ å®éªŒæœªè¿è¡Œ"
    fi
    
    echo ""
    echo "------------------------------------------------"
    echo "ğŸ“Š æœ€æ–°è¿›åº¦"
    echo "------------------------------------------------"
    
    # å½“å‰æ–¹æ³•
    tail -100 "$LOG_FILE" | grep "è¯„æµ‹æ–¹æ³•:" | tail -1
    
    # è¿›åº¦æ¡
    tail -50 "$LOG_FILE" | grep "è¿è¡Œ.*%\|" | tail -3
    
    echo ""
    echo "------------------------------------------------"
    echo "ğŸ“ˆ å·²å®Œæˆæ–¹æ³•"
    echo "------------------------------------------------"
    grep "âœ….*å®Œæˆ:" "$LOG_FILE" | tail -10
    
    echo ""
    echo "================================================"
    echo "æŒ‰ Ctrl+C é€€å‡ºç›‘æ§"
    echo "================================================"
    
    sleep 60
done

